/* ===============================================================
   PRINT SPECIFIC STYLES
   =============================================================== */
@media print {

  @page { 
    size: 8.5in 11in;   /* Letter */
    margin: 0.1in;
  }

  html, body {
    width: 8.5in;
    height: 11in;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    background: white !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .container {
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
  }

  /* 教育セクションの余白ゼロ化 */
  .educacion-empty-space {
    height: 0 !important;
    min-height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    display: none !important;
  }

  .print-root {
    margin: 0 !important;
    padding: 0 !important;
  }

  .print-page {
    page-break-after: always !important;
  }
  .print-page:last-child {
    page-break-after: auto !important;
  }

  /* ===============================================================
      カードのページ割れ防止
     =============================================================== */
  .no-break,
  .print-block,
  .print-card {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* ===============================================================
      TopSection（Informacion Basica + 地図）レイアウト修正
     =============================================================== */
  .print-top-grid {
    display: grid !important;
    grid-template-columns: 0.8fr 1fr !important;
    gap: 12px !important;
    align-items: start !important;
  }

  /* --- 左側：基本情報 --- */
  .print-info-basic {
    width: 100% !important;
    padding: 0 !important;
  }
  /* 狭くなった分、文字サイズを少し落として収まりを良くする */
  .print-info-basic .text-lg {
    font-size: 12px !important;
  }
  .print-info-basic .text-sm, 
  .print-info-basic .text-xs {
    font-size: 10px !important;
  }

  /* --- 右側：地図カード --- */
  .print-map-card {
    width: 100% !important;
    max-width: 260px !important;
    padding: 0 !important;
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }

  /* ヘッダー文字サイズ調整 */
  .print-map-card h3 {
    font-size: 10px !important;
    margin-bottom: 2px !important;
  }

  /* --- Leaflet地図本体の修正 --- */
  .print-map-card .leaflet-container {
    width: 100% !important;
    height: 260px !important; 
    min-height: 160px !important;
    max-height: 160px !important;
    z-index: 0 !important;
  }

  /* 地図画像（タイル）の崩れ防止 */
  .print-map-card .leaflet-container img {
    max-width: none !important;
    width: auto !important;
    height: auto !important;
  }

  /* Recharts等が混ざっている場合の保険 */
  .print-map-card .recharts-responsive-container,
  .print-map-card .recharts-wrapper {
    width: 180px !important;
    height: 160px !important;
  }

  /* UI非表示 */
  .hide-on-print {
    display: none !important;
  }

  /* ===============================================================
      Hogares（世帯）セクションのレイアウト変更 (2カラム化)
      ★ここが追加箇所です
     =============================================================== */
  .print-hogares-grid {
    display: grid !important;
    /* 左(カード) : 右(グラフ) */
    grid-template-columns: 200px 1fr !important;
    gap: 12px !important;
    align-items: start !important;
  }

  /* 左カラム（カード群） */
  .print-hogares-left {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
  }

  /* 左カラム内のカードをコンパクトに */
  .print-hogares-left .print-card {
    padding: 6px 10px !important;
    min-height: 0 !important;
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }
  
  /* カード内の文字サイズ微調整 */
  .print-hogares-left .print-card h3,
  .print-hogares-left .print-card .text-xs { 
    font-size: 10px !important;
  }
  .print-hogares-left .print-card .text-2xl,
  .print-hogares-left .print-card .text-3xl {
    font-size: 18px !important; /* 数字を少し小さく */
  }

  /* 右カラム（グラフ） */
  .print-hogares-right {
    width: 100% !important;
    height: auto !important;
    border: 1px solid #ddd !important;
    border-radius: 4px !important;
    padding: 4px !important;
    background: white !important;
  }

  /* グラフの高さを、左のカード3枚分の高さ（約240px想定）に合わせる */
  .print-hogares-right .chart-container,
  .print-hogares-right .recharts-responsive-container,
  .print-hogares-right .recharts-wrapper {
    height: 240px !important; 
    width: 100% !important;
    max-width: none !important;
    min-height: 240px !important;
  }


  /* ===============================================================
      Infraestructura (8カード)
     =============================================================== */
  .educacion-infra-grid {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 8px !important;
  }

  .educacion-infra-grid > * {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  .educacion-infra-grid + .print-section {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }

  h3 {
    margin-top: 4px !important;
  }

  /* ===============================================================
      Eficiencia（Inicial / Primario / Secundario）
      強力なサイズ調整
     =============================================================== */
  .educacion-eficiencia-grid {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 8px !important;
  }

  .educacion-eficiencia-grid > * {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  .educacion-eficiencia-grid .print-card {
    padding: 4px 8px !important;
  }

  .educacion-eficiencia-grid .print-card .text-xs {
    font-size: 8px !important;
    line-height: 1.1 !important;
  }

  .educacion-eficiencia-grid .print-card > div.flex {
    gap: 4px !important; 
    align-items: center !important;
  }
  
  .educacion-eficiencia-grid .print-flex {
    justify-content: flex-start !important;
    gap: 4px !important;
  }

  .educacion-eficiencia-grid .chart-container,
  .educacion-eficiencia-grid .chart-container > div,
  .educacion-eficiencia-grid .recharts-wrapper,
  .educacion-eficiencia-grid .recharts-surface,
  .educacion-eficiencia-grid .recharts-responsive-container {
    width: 100px !important;
    height: 100px !important;
    min-width: 100px !important;
    min-height: 100px !important;
    margin: 0 !important; 
  }

  /* ===============================================================
      その他の汎用クラス
     =============================================================== */

  .print-allow-break {
    break-inside: auto !important;
    page-break-inside: auto !important;
  }

  .print-grid {
    display: grid !important;
  }
  .print-grid-2 {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  .print-grid-3 {
    grid-template-columns: repeat(3, 1fr) !important;
  }

  .print-flex {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
  }

  .print-card {
    box-shadow: none !important;
    border-radius: 4px !important;
  }

  .print-no-bg {
    background: white !important;
  }

  .print-no-padding {
    padding: 4px !important;
  }

  .print-no-margin {
    margin: 2px !important;
  }

  .rounded-2xl {
    border-radius: 4px !important;
  }
}